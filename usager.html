<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>SmartQueue - Prendre un ticket</title>
<style>
body {
  margin:0;
  font-family:Arial,sans-serif;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:flex-start;
  overflow:auto;
  color:white;
  position:relative;
  padding-top:40px;
}
body::before {
  content:"";
  position:absolute;
  top:0; left:0;
  width:100%; height:100%;
  background-image:url('arri√®re plan.jpg');
  background-size:cover;
  background-position:center;
  filter:blur(8px);
  opacity:0.9;
  z-index:-1;
}
.card {
  background:linear-gradient(135deg, rgba(50,50,50,0.9), rgba(80,80,120,0.9), rgba(100,100,140,0.9));
  backdrop-filter:blur(12px);
  border-radius:20px;
  padding:30px;
  max-width:520px;
  text-align:center;
  box-shadow:0 20px 40px rgba(0,0,0,0.5);
  margin-bottom:40px;
}
.logo {width:60px;height:60px;margin-bottom:15px;background:rgba(255,255,255,0.1);padding:8px;border-radius:50%;}
h1 {font-size:2em;text-shadow:1px 1px 5px rgba(0,0,0,0.7);}
select,input,button {width:90%;padding:12px;margin:10px 0;border-radius:10px;border:none;font-size:16px;}
button {cursor:pointer;font-weight:bold;}
.take-btn {background:linear-gradient(135deg,#48dbfb,#1dd1a1);}
.footer {margin-top:20px;font-size:12px;opacity:0.8;text-align:center;}

/* Pop-up avis */
#ratingPopup {
  display:none;
  position:fixed;
  top:50%; left:50%;
  transform:translate(-50%,-50%);
  background:linear-gradient(135deg, rgba(50,50,50,0.95), rgba(80,80,120,0.95));
  padding:25px;
  border-radius:20px;
  text-align:center;
  z-index:1000;
}
#ratingPopup .star {
  font-size:40px;
  cursor:pointer;
  color:white;
  margin:0 5px;
  transition:color 0.3s;
}
#overlay {
  display:none;
  position:fixed;
  top:0; left:0;
  width:100%; height:100%;
  background:rgba(0,0,0,0.5);
  z-index:900;
}
</style>
</head>
<body>

<div class="card">
  <img src="logo.png" class="logo" alt="Logo">
  <h1>Prendre un ticket</h1>

  <select id="service">
    <option value="camwater">üíß Camwater</option>
    <option value="eneo">‚ö° Eneo</option>
    <option value="post">üì¨ La Poste</option>
    <option value="autre">üè¢ Autres</option>
  </select>
  <input type="text" id="nom" placeholder="Nom complet">
  <button class="take-btn" onclick="takeTicket()">üé´ Prendre un ticket</button>

  <div class="footer">¬© 2026 SmartQueue</div>
</div>

<!-- Pop-up avis -->
<div id="overlay"></div>
<div id="ratingPopup">
  <p>√âvaluez votre exp√©rience :</p>
  <span class="star" onclick="rate(1)" id="star1">&#9733;</span>
  <span class="star" onclick="rate(2)" id="star2">&#9733;</span>
  <span class="star" onclick="rate(3)" id="star3">&#9733;</span>
  <span class="star" onclick="rate(4)" id="star4">&#9733;</span>
  <span class="star" onclick="rate(5)" id="star5">&#9733;</span>
  <p style="margin-top:15px;font-size:14px;opacity:0.8;">Merci pour votre retour !</p>
</div>

<script>
const overlay = document.getElementById('overlay');
const popup = document.getElementById('ratingPopup');
let currentRating = 0;
let selectedService = 'autre';

// Prendre un ticket
function takeTicket(){
  const service = document.getElementById('service').value;
  const nom = document.getElementById('nom').value.trim();
  if(!nom){
    alert("Veuillez entrer votre nom complet");
    return;
  }
  selectedService = service;
  const key = 'tickets_' + service;
  const tickets = JSON.parse(localStorage.getItem(key)) || [];
  const newTicket = tickets.length + 1;
  tickets.push(newTicket);
  localStorage.setItem(key, JSON.stringify(tickets));
  alert(`Ticket #${newTicket} pris pour ${service}`);
  
  // Afficher pop-up avis
  overlay.style.display = 'block';
  popup.style.display = 'block';
}

// Avis interactif
function rate(stars){
  currentRating = stars;
  localStorage.setItem('rating_' + selectedService, stars);
  updateStars();
  // Fermer pop-up apr√®s 1s
  setTimeout(()=>{
    popup.style.display='none';
    overlay.style.display='none';
  },800);
}

function updateStars(){
  for(let i=1;i<=5;i++){
    const star = document.getElementById('star'+i);
    if(i <= currentRating){
      star.style.color = "#ffd700";
    } else {
      star.style.color = "white";
    }
  }
}

// Charger note pr√©c√©dente si existe
const savedRating = localStorage.getItem('rating_' + selectedService);
if(savedRating){
  currentRating = parseInt(savedRating);
  updateStars();
}
</script>

</body>
</html>